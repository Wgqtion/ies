<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap> 
	<!-- 根据停车场id获取总车位与已用车位 -->
	<select id="report.parkinggarage.onlinenum.total" resultClass="mapBean" parameterClass="map" >
				select count(T_PARKING_GARAGE.ID) as total,T_PARKING_LOT.ID,T_PARKING_LOT.name,
				sum(T_PARKING_GARAGE.IS_ONLINE) as onlinenum
				 from T_PARKING_GARAGE left outer join 
				T_PARKING_LOT_AREA on T_PARKING_GARAGE.PARKING_LOT_AREA_ID=T_PARKING_LOT_AREA.ID
				left outer join T_PARKING_LOT on T_PARKING_LOT_AREA.PARKING_LOT_ID=T_PARKING_LOT.ID
				<isNotEmpty  property="id" >
		  				where T_PARKING_LOT.ID=#id#
				</isNotEmpty> 
				group by T_PARKING_LOT.ID,T_PARKING_LOT.name
	</select> 
	<!-- 根据停车场id获取总车位与已用车位 -->
	<select id="report.parkinglock.onlinenum.total" resultClass="mapBean" parameterClass="map" >
				 select  count(*) as total ,sum(is_online) as tonline,nvl(sum(is_open),0) as topen
 				from T_PARKING_LOCK
	</select> 
	


</sqlMap>

